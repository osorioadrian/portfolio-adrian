---
import { Image } from 'astro:assets';
import imageA from './../../../public/image.png'; 

interface NavTexts {
  name: string
  href: string,
}

interface Props {
  navLinks: NavTexts[]
}

const { navLinks } = Astro.props as Props
---

<header class="sticky top-0 z-50 w-full border-b border-black/5 bg-white">
  <div class="mx-auto max-w-7xl px-6 md:px-8 py-4 relative">
    <div class="flex justify-between items-center">

      <a href={`#home`} class="flex items-center gap-2 group">
        <Image 
          src={imageA} 
          alt="Adrian Camilo Osorio"
          width={64} height={64}
          class="h-8 w-8 rounded-full object-cover shadow-sm"
        />
        <span class="text-lg font-medium tracking-tight text-black group-hover:opacity-70 transition-opacity">
          Adrian Camilo Osorio
        </span>
      </a>

      <nav class="hidden md:flex items-center gap-1">
        {navLinks.map((link) => (
          <a 
            href={link.href}
            class="min-w-25 px-4 py-2 text-sm font-medium text-black/70 hover:text-black transition-colors text-center"
          >
            {link.name}
          </a>
        ))}
      </nav>

      <div class="flex items-center gap-2 md:gap-4">
        <div class="flex items-center">
          <a 
            href={`portfolio-adrian/es/`} 
            class={`p-2 text-xl transition-all `}
          >
            ðŸ‡ªðŸ‡¸
          </a>
          <a 
            href={`portfolio-adrian/en/`} 
            class={`p-2 text-xl transition-all`}
          >
            ðŸ‡ºðŸ‡¸
          </a>
        </div>

        <button id="menu-toggle" class="md:hidden p-2 text-black/70 z-50">
          <svg id="menu-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.2" stroke="currentColor" class="w-7 h-7 transition-transform duration-300">
            <path stroke-linecap="round" stroke-linejoin="round" d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5" />
          </svg>
        </button>
      </div>
    </div>

    <nav id="mobile-menu" class="hidden absolute top-full left-0 w-full bg-white border-b border-black/10 flex-col px-6 py-4 shadow-2xl z-60 animate-fade-in-down">
      {navLinks.map((link) => (
        <a 
          href={link.href}
          class="w-full py-4 text-sm font-medium text-black/70 hover:text-black transition-colors text-center"
        >
          {link.name}
        </a>
      ))}
    </nav>
  </div>
</header>

<script>
  const menuToggle = document.getElementById('menu-toggle');
  const mobileMenu = document.getElementById('mobile-menu');
  const menuIcon = document.getElementById('menu-icon');

  function toggleMenu() {
    const isExpanded = menuToggle?.getAttribute('aria-expanded') === 'true';
    menuToggle?.setAttribute('aria-expanded', (!isExpanded).toString());
    mobileMenu?.classList.toggle('hidden');
    mobileMenu?.classList.toggle('flex');
    
    if (!isExpanded) {
        menuIcon?.classList.add('rotate-90');
        document.body.style.overflow = 'hidden';
    } else {
        menuIcon?.classList.remove('rotate-90');
        document.body.style.overflow = 'auto';
    }
  }

  menuToggle?.addEventListener('click', toggleMenu);

  const links = mobileMenu?.querySelectorAll('a');
  links?.forEach(link => {
    link.addEventListener('click', () => {
      mobileMenu?.classList.add('hidden');
      mobileMenu?.classList.remove('flex');
      menuToggle?.setAttribute('aria-expanded', 'false');
      menuIcon?.classList.remove('rotate-90');
      document.body.style.overflow = 'auto';
    });
  });

  window.addEventListener('resize', () => {
    if (window.innerWidth >= 768) {
      mobileMenu?.classList.add('hidden');
      mobileMenu?.classList.remove('flex');
      menuToggle?.setAttribute('aria-expanded', 'false');
      document.body.style.overflow = 'auto';
    }
  });
</script>

<style>
  @keyframes fade-in-down {
    from { opacity: 0; transform: translateY(-5px); }
    to { opacity: 1; transform: translateY(0); }
  }
  .animate-fade-in-down {
    animation: fade-in-down 0.2s ease-out forwards;
  }
</style>
